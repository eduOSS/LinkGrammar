<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (version 1.7.0_11) on Tue Nov 12 16:55:29 PST 2013 -->
<title>AbstractStochasticCachingDiffFunction (Stanford JavaNLP API)</title>
<meta name="date" content="2013-11-12">
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
</head>
<body>
<script type="text/javascript"><!--
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="AbstractStochasticCachingDiffFunction (Stanford JavaNLP API)";
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar_top">
<!--   -->
</a><a href="#skip-navbar_top" title="Skip navigation links"></a><a name="navbar_top_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../edu/stanford/nlp/optimization/AbstractCachingDiffFunction.html" title="class in edu.stanford.nlp.optimization"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../../edu/stanford/nlp/optimization/AbstractStochasticCachingDiffFunction.SamplingMethod.html" title="enum in edu.stanford.nlp.optimization"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?edu/stanford/nlp/optimization/AbstractStochasticCachingDiffFunction.html" target="_top">Frames</a></li>
<li><a href="AbstractStochasticCachingDiffFunction.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested_class_summary">Nested</a>&nbsp;|&nbsp;</li>
<li><a href="#field_summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field_detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">edu.stanford.nlp.optimization</div>
<h2 title="Class AbstractStochasticCachingDiffFunction" class="title">Class AbstractStochasticCachingDiffFunction</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li><a href="../../../../edu/stanford/nlp/optimization/AbstractCachingDiffFunction.html" title="class in edu.stanford.nlp.optimization">edu.stanford.nlp.optimization.AbstractCachingDiffFunction</a></li>
<li>
<ul class="inheritance">
<li>edu.stanford.nlp.optimization.AbstractStochasticCachingDiffFunction</li>
</ul>
</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Implemented Interfaces:</dt>
<dd><a href="../../../../edu/stanford/nlp/optimization/DiffFunction.html" title="interface in edu.stanford.nlp.optimization">DiffFunction</a>, <a href="../../../../edu/stanford/nlp/optimization/Function.html" title="interface in edu.stanford.nlp.optimization">Function</a>, <a href="../../../../edu/stanford/nlp/optimization/HasInitial.html" title="interface in edu.stanford.nlp.optimization">HasInitial</a></dd>
</dl>
<dl>
<dt>Direct Known Subclasses:</dt>
<dd><a href="../../../../edu/stanford/nlp/optimization/AbstractStochasticCachingDiffUpdateFunction.html" title="class in edu.stanford.nlp.optimization">AbstractStochasticCachingDiffUpdateFunction</a></dd>
</dl>
<hr>
<br>
<pre>public abstract class <span class="strong">AbstractStochasticCachingDiffFunction</span>
extends <a href="../../../../edu/stanford/nlp/optimization/AbstractCachingDiffFunction.html" title="class in edu.stanford.nlp.optimization">AbstractCachingDiffFunction</a></pre>
<dl><dt><span class="strong">Author:</span></dt>
  <dd>Alex Kleeman</dd></dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== NESTED CLASS SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="nested_class_summary">
<!--   -->
</a>
<h3>Nested Class Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Nested Class Summary table, listing nested classes, and an explanation">
<caption><span>Nested Classes</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Class and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static class&nbsp;</code></td>
<td class="colLast"><code><strong><a href="../../../../edu/stanford/nlp/optimization/AbstractStochasticCachingDiffFunction.SamplingMethod.html" title="enum in edu.stanford.nlp.optimization">AbstractStochasticCachingDiffFunction.SamplingMethod</a></strong></code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- =========== FIELD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="field_summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Field Summary table, listing fields, and an explanation">
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Field and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected java.util.List&lt;java.lang.Integer&gt;</code></td>
<td class="colLast"><code><strong><a href="../../../../edu/stanford/nlp/optimization/AbstractStochasticCachingDiffFunction.html#allIndices">allIndices</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected int</code></td>
<td class="colLast"><code><strong><a href="../../../../edu/stanford/nlp/optimization/AbstractStochasticCachingDiffFunction.html#curElement">curElement</a></strong></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected double</code></td>
<td class="colLast"><code><strong><a href="../../../../edu/stanford/nlp/optimization/AbstractStochasticCachingDiffFunction.html#finiteDifferenceStepSize">finiteDifferenceStepSize</a></strong></code>
<div class="block">finiteDifferenceStepSize - this is the fixed step size for the finite difference approximation.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected double[]</code></td>
<td class="colLast"><code><strong><a href="../../../../edu/stanford/nlp/optimization/AbstractStochasticCachingDiffFunction.html#gradPerturbed">gradPerturbed</a></strong></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../edu/stanford/nlp/optimization/AbstractStochasticCachingDiffFunction.html#hasNewVals">hasNewVals</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected double[]</code></td>
<td class="colLast"><code><strong><a href="../../../../edu/stanford/nlp/optimization/AbstractStochasticCachingDiffFunction.html#HdotV">HdotV</a></strong></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected int[]</code></td>
<td class="colLast"><code><strong><a href="../../../../edu/stanford/nlp/optimization/AbstractStochasticCachingDiffFunction.html#lastBatch">lastBatch</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected int</code></td>
<td class="colLast"><code><strong><a href="../../../../edu/stanford/nlp/optimization/AbstractStochasticCachingDiffFunction.html#lastBatchSize">lastBatchSize</a></strong></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected int</code></td>
<td class="colLast"><code><strong><a href="../../../../edu/stanford/nlp/optimization/AbstractStochasticCachingDiffFunction.html#lastElement">lastElement</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected double[]</code></td>
<td class="colLast"><code><strong><a href="../../../../edu/stanford/nlp/optimization/AbstractStochasticCachingDiffFunction.html#lastVBatch">lastVBatch</a></strong></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected double[]</code></td>
<td class="colLast"><code><strong><a href="../../../../edu/stanford/nlp/optimization/AbstractStochasticCachingDiffFunction.html#lastXBatch">lastXBatch</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="../../../../edu/stanford/nlp/optimization/StochasticCalculateMethods.html" title="enum in edu.stanford.nlp.optimization">StochasticCalculateMethods</a></code></td>
<td class="colLast"><code><strong><a href="../../../../edu/stanford/nlp/optimization/AbstractStochasticCachingDiffFunction.html#method">method</a></strong></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected java.util.Random</code></td>
<td class="colLast"><code><strong><a href="../../../../edu/stanford/nlp/optimization/AbstractStochasticCachingDiffFunction.html#randGenerator">randGenerator</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../edu/stanford/nlp/optimization/AbstractStochasticCachingDiffFunction.html#recalculatePrevBatch">recalculatePrevBatch</a></strong></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../edu/stanford/nlp/optimization/AbstractStochasticCachingDiffFunction.html#returnPreviousValues">returnPreviousValues</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="../../../../edu/stanford/nlp/optimization/AbstractStochasticCachingDiffFunction.SamplingMethod.html" title="enum in edu.stanford.nlp.optimization">AbstractStochasticCachingDiffFunction.SamplingMethod</a></code></td>
<td class="colLast"><code><strong><a href="../../../../edu/stanford/nlp/optimization/AbstractStochasticCachingDiffFunction.html#sampleMethod">sampleMethod</a></strong></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../edu/stanford/nlp/optimization/AbstractStochasticCachingDiffFunction.html#scaleUp">scaleUp</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected int[]</code></td>
<td class="colLast"><code><strong><a href="../../../../edu/stanford/nlp/optimization/AbstractStochasticCachingDiffFunction.html#thisBatch">thisBatch</a></strong></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected double[]</code></td>
<td class="colLast"><code><strong><a href="../../../../edu/stanford/nlp/optimization/AbstractStochasticCachingDiffFunction.html#xPerturbed">xPerturbed</a></strong></code>&nbsp;</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="fields_inherited_from_class_edu.stanford.nlp.optimization.AbstractCachingDiffFunction">
<!--   -->
</a>
<h3>Fields inherited from class&nbsp;edu.stanford.nlp.optimization.<a href="../../../../edu/stanford/nlp/optimization/AbstractCachingDiffFunction.html" title="class in edu.stanford.nlp.optimization">AbstractCachingDiffFunction</a></h3>
<code><a href="../../../../edu/stanford/nlp/optimization/AbstractCachingDiffFunction.html#derivative">derivative</a>, <a href="../../../../edu/stanford/nlp/optimization/AbstractCachingDiffFunction.html#generator">generator</a>, <a href="../../../../edu/stanford/nlp/optimization/AbstractCachingDiffFunction.html#value">value</a></code></li>
</ul>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><strong><a href="../../../../edu/stanford/nlp/optimization/AbstractStochasticCachingDiffFunction.html#AbstractStochasticCachingDiffFunction()">AbstractStochasticCachingDiffFunction</a></strong>()</code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method_summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span>Methods</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>abstract void</code></td>
<td class="colLast"><code><strong><a href="../../../../edu/stanford/nlp/optimization/AbstractStochasticCachingDiffFunction.html#calculateStochastic(double[], double[], int[])">calculateStochastic</a></strong>(double[]&nbsp;x,
                   double[]&nbsp;v,
                   int[]&nbsp;batch)</code>
<div class="block">calculateStochastic needs to calculate a stochastic approximation to the derivative and value of
    of a function for a given batch of the data.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected void</code></td>
<td class="colLast"><code><strong><a href="../../../../edu/stanford/nlp/optimization/AbstractStochasticCachingDiffFunction.html#clearCache()">clearCache</a></strong>()</code>
<div class="block">Clears the cache in a way that doesn't require reallocation :-)</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>abstract int</code></td>
<td class="colLast"><code><strong><a href="../../../../edu/stanford/nlp/optimization/AbstractStochasticCachingDiffFunction.html#dataDimension()">dataDimension</a></strong>()</code>
<div class="block">Data dimension must return the size of the data used by the function.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../edu/stanford/nlp/optimization/AbstractStochasticCachingDiffFunction.html#decrementBatch(int)">decrementBatch</a></strong>(int&nbsp;batchSize)</code>
<div class="block">decrementBatch - This decrements the curElement variable by the amount batchSize.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>double[]</code></td>
<td class="colLast"><code><strong><a href="../../../../edu/stanford/nlp/optimization/AbstractStochasticCachingDiffFunction.html#derivativeAt(double[], double[], int)">derivativeAt</a></strong>(double[]&nbsp;x,
            double[]&nbsp;v,
            int&nbsp;batchSize)</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>double[]</code></td>
<td class="colLast"><code><strong><a href="../../../../edu/stanford/nlp/optimization/AbstractStochasticCachingDiffFunction.html#derivativeAt(double[], int)">derivativeAt</a></strong>(double[]&nbsp;x,
            int&nbsp;batchSize)</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected void</code></td>
<td class="colLast"><code><strong><a href="../../../../edu/stanford/nlp/optimization/AbstractStochasticCachingDiffFunction.html#getBatch(int)">getBatch</a></strong>(int&nbsp;batchSize)</code>
<div class="block">getBatch is used to generate the next sequence of indices to be passed to the actual function.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>double[]</code></td>
<td class="colLast"><code><strong><a href="../../../../edu/stanford/nlp/optimization/AbstractStochasticCachingDiffFunction.html#HdotVAt(double[], double[])">HdotVAt</a></strong>(double[]&nbsp;x,
       double[]&nbsp;v)</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>double[]</code></td>
<td class="colLast"><code><strong><a href="../../../../edu/stanford/nlp/optimization/AbstractStochasticCachingDiffFunction.html#HdotVAt(double[], double[], double[], int)">HdotVAt</a></strong>(double[]&nbsp;x,
       double[]&nbsp;v,
       double[]&nbsp;curDerivative,
       int&nbsp;batchSize)</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>double[]</code></td>
<td class="colLast"><code><strong><a href="../../../../edu/stanford/nlp/optimization/AbstractStochasticCachingDiffFunction.html#HdotVAt(double[], double[], int)">HdotVAt</a></strong>(double[]&nbsp;x,
       double[]&nbsp;v,
       int&nbsp;batchSize)</code>
<div class="block">HdotVAt  will return the hessian vector product H.v at the point x for a batchSize subset of the data

 There are several ways to perform this calculation, as of now Finite Difference, and Algorithmic Differentiation
  are the methods that have been used.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../edu/stanford/nlp/optimization/AbstractStochasticCachingDiffFunction.html#incrementBatch(int)">incrementBatch</a></strong>(int&nbsp;batchSize)</code>
<div class="block">incrementBatch will shift the curElement variable to mark the next batch.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../edu/stanford/nlp/optimization/AbstractStochasticCachingDiffFunction.html#incrementRandom(int)">incrementRandom</a></strong>(int&nbsp;numTimes)</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>double[]</code></td>
<td class="colLast"><code><strong><a href="../../../../edu/stanford/nlp/optimization/AbstractStochasticCachingDiffFunction.html#initial()">initial</a></strong>()</code>
<div class="block">Returns the intitial point in the domain (but not necessarily a feasible one).</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>double[]</code></td>
<td class="colLast"><code><strong><a href="../../../../edu/stanford/nlp/optimization/AbstractStochasticCachingDiffFunction.html#lastDerivative()">lastDerivative</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>double</code></td>
<td class="colLast"><code><strong><a href="../../../../edu/stanford/nlp/optimization/AbstractStochasticCachingDiffFunction.html#lastValue()">lastValue</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../edu/stanford/nlp/optimization/AbstractStochasticCachingDiffFunction.html#scaleUp(boolean)">scaleUp</a></strong>(boolean&nbsp;toScaleUp)</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>double</code></td>
<td class="colLast"><code><strong><a href="../../../../edu/stanford/nlp/optimization/AbstractStochasticCachingDiffFunction.html#valueAt(double[], double[], int)">valueAt</a></strong>(double[]&nbsp;x,
       double[]&nbsp;v,
       int&nbsp;batchSize)</code>
<div class="block">This function will return the stochastic approximation at the point x.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>double</code></td>
<td class="colLast"><code><strong><a href="../../../../edu/stanford/nlp/optimization/AbstractStochasticCachingDiffFunction.html#valueAt(double[], int)">valueAt</a></strong>(double[]&nbsp;x,
       int&nbsp;batchSize)</code>
<div class="block">valueAt(x,batchSize)   derivativeAt(x,batchSize)

 invokes the calculateStochastic function to get the current value at x for the next batchSize data points.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_edu.stanford.nlp.optimization.AbstractCachingDiffFunction">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;edu.stanford.nlp.optimization.<a href="../../../../edu/stanford/nlp/optimization/AbstractCachingDiffFunction.html" title="class in edu.stanford.nlp.optimization">AbstractCachingDiffFunction</a></h3>
<code><a href="../../../../edu/stanford/nlp/optimization/AbstractCachingDiffFunction.html#calculate(double[])">calculate</a>, <a href="../../../../edu/stanford/nlp/optimization/AbstractCachingDiffFunction.html#copy(double[], double[])">copy</a>, <a href="../../../../edu/stanford/nlp/optimization/AbstractCachingDiffFunction.html#derivativeAt(double[])">derivativeAt</a>, <a href="../../../../edu/stanford/nlp/optimization/AbstractCachingDiffFunction.html#ensure(double[])">ensure</a>, <a href="../../../../edu/stanford/nlp/optimization/AbstractCachingDiffFunction.html#getDerivative()">getDerivative</a>, <a href="../../../../edu/stanford/nlp/optimization/AbstractCachingDiffFunction.html#gradientCheck()">gradientCheck</a>, <a href="../../../../edu/stanford/nlp/optimization/AbstractCachingDiffFunction.html#gradientCheck(int, int, double[])">gradientCheck</a>, <a href="../../../../edu/stanford/nlp/optimization/AbstractCachingDiffFunction.html#randomInitial()">randomInitial</a>, <a href="../../../../edu/stanford/nlp/optimization/AbstractCachingDiffFunction.html#valueAt(double[])">valueAt</a></code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_edu.stanford.nlp.optimization.Function">
<!--   -->
</a>
<h3>Methods inherited from interface&nbsp;edu.stanford.nlp.optimization.<a href="../../../../edu/stanford/nlp/optimization/Function.html" title="interface in edu.stanford.nlp.optimization">Function</a></h3>
<code><a href="../../../../edu/stanford/nlp/optimization/Function.html#domainDimension()">domainDimension</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<ul class="blockList">
<li class="blockList"><a name="field_detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a name="hasNewVals">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>hasNewVals</h4>
<pre>public&nbsp;boolean hasNewVals</pre>
</li>
</ul>
<a name="recalculatePrevBatch">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>recalculatePrevBatch</h4>
<pre>public&nbsp;boolean recalculatePrevBatch</pre>
</li>
</ul>
<a name="returnPreviousValues">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>returnPreviousValues</h4>
<pre>public&nbsp;boolean returnPreviousValues</pre>
</li>
</ul>
<a name="lastBatchSize">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>lastBatchSize</h4>
<pre>protected&nbsp;int lastBatchSize</pre>
</li>
</ul>
<a name="lastBatch">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>lastBatch</h4>
<pre>protected&nbsp;int[] lastBatch</pre>
</li>
</ul>
<a name="thisBatch">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>thisBatch</h4>
<pre>protected&nbsp;int[] thisBatch</pre>
</li>
</ul>
<a name="lastXBatch">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>lastXBatch</h4>
<pre>protected&nbsp;double[] lastXBatch</pre>
</li>
</ul>
<a name="lastVBatch">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>lastVBatch</h4>
<pre>protected&nbsp;double[] lastVBatch</pre>
</li>
</ul>
<a name="lastElement">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>lastElement</h4>
<pre>protected&nbsp;int lastElement</pre>
</li>
</ul>
<a name="HdotV">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>HdotV</h4>
<pre>protected&nbsp;double[] HdotV</pre>
</li>
</ul>
<a name="gradPerturbed">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>gradPerturbed</h4>
<pre>protected&nbsp;double[] gradPerturbed</pre>
</li>
</ul>
<a name="xPerturbed">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>xPerturbed</h4>
<pre>protected&nbsp;double[] xPerturbed</pre>
</li>
</ul>
<a name="curElement">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>curElement</h4>
<pre>protected&nbsp;int curElement</pre>
</li>
</ul>
<a name="allIndices">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>allIndices</h4>
<pre>protected&nbsp;java.util.List&lt;java.lang.Integer&gt; allIndices</pre>
</li>
</ul>
<a name="randGenerator">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>randGenerator</h4>
<pre>protected&nbsp;java.util.Random randGenerator</pre>
</li>
</ul>
<a name="scaleUp">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>scaleUp</h4>
<pre>protected&nbsp;boolean scaleUp</pre>
</li>
</ul>
<a name="method">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>method</h4>
<pre>public&nbsp;<a href="../../../../edu/stanford/nlp/optimization/StochasticCalculateMethods.html" title="enum in edu.stanford.nlp.optimization">StochasticCalculateMethods</a> method</pre>
</li>
</ul>
<a name="sampleMethod">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>sampleMethod</h4>
<pre>public&nbsp;<a href="../../../../edu/stanford/nlp/optimization/AbstractStochasticCachingDiffFunction.SamplingMethod.html" title="enum in edu.stanford.nlp.optimization">AbstractStochasticCachingDiffFunction.SamplingMethod</a> sampleMethod</pre>
</li>
</ul>
<a name="finiteDifferenceStepSize">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>finiteDifferenceStepSize</h4>
<pre>protected&nbsp;double finiteDifferenceStepSize</pre>
<div class="block">finiteDifferenceStepSize - this is the fixed step size for the finite difference approximation.
    a few tests were run using the SMD minimizer, and step sizes of 1e-4 to 1e-3 seemed to be ideal.
 (akleeman)</div>
</li>
</ul>
</li>
</ul>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="AbstractStochasticCachingDiffFunction()">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>AbstractStochasticCachingDiffFunction</h4>
<pre>public&nbsp;AbstractStochasticCachingDiffFunction()</pre>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method_detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="incrementRandom(int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>incrementRandom</h4>
<pre>public&nbsp;void&nbsp;incrementRandom(int&nbsp;numTimes)</pre>
</li>
</ul>
<a name="scaleUp(boolean)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>scaleUp</h4>
<pre>public&nbsp;void&nbsp;scaleUp(boolean&nbsp;toScaleUp)</pre>
</li>
</ul>
<a name="calculateStochastic(double[], double[], int[])">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>calculateStochastic</h4>
<pre>public abstract&nbsp;void&nbsp;calculateStochastic(double[]&nbsp;x,
                       double[]&nbsp;v,
                       int[]&nbsp;batch)</pre>
<div class="block">calculateStochastic needs to calculate a stochastic approximation to the derivative and value of
    of a function for a given batch of the data.  The approximation to the derivative must be stored
    in the array <code> derivative </code>, the approximation to the value in <code> value </code>
    and the approximation to the Hessian vector product H.v in the array <code> HdotV </code>.  Note
    that the hessian vector product is used primarily with the Stochastic Meta Descent optimization
    routine <code> SMDMinimizer </code>.

  Important: The stochastic approximation must be such that the sum of all stochastic calculations over
    each of the batches in the data must equal the full calculation.  i.e. for a data set of size 100
    the sum of the gradients for batches 1-10 , 11-20 , 21-30 .... 91-100 must be the same as the gradient
    for the full calculation (at the very least in expectation).  Be sure to take into account the priors.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>x</code> - -  value to evaluate at</dd><dd><code>v</code> - -  the vector for the Hessian vector product H.v</dd><dd><code>batch</code> - -  an array containing the indices of the data to use in the calculation, this array is being calculated
                        internal to the abstract, and only needs to be handled not generated by the implementation.</dd></dl>
</li>
</ul>
<a name="dataDimension()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>dataDimension</h4>
<pre>public abstract&nbsp;int&nbsp;dataDimension()</pre>
<div class="block">Data dimension must return the size of the data used by the function.</div>
</li>
</ul>
<a name="clearCache()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>clearCache</h4>
<pre>protected&nbsp;void&nbsp;clearCache()</pre>
<div class="block">Clears the cache in a way that doesn't require reallocation :-)</div>
<dl>
<dt><strong>Overrides:</strong></dt>
<dd><code><a href="../../../../edu/stanford/nlp/optimization/AbstractCachingDiffFunction.html#clearCache()">clearCache</a></code>&nbsp;in class&nbsp;<code><a href="../../../../edu/stanford/nlp/optimization/AbstractCachingDiffFunction.html" title="class in edu.stanford.nlp.optimization">AbstractCachingDiffFunction</a></code></dd>
</dl>
</li>
</ul>
<a name="initial()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>initial</h4>
<pre>public&nbsp;double[]&nbsp;initial()</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../../edu/stanford/nlp/optimization/HasInitial.html#initial()">HasInitial</a></code></strong></div>
<div class="block">Returns the intitial point in the domain (but not necessarily a feasible one).</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../edu/stanford/nlp/optimization/HasInitial.html#initial()">initial</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../edu/stanford/nlp/optimization/HasInitial.html" title="interface in edu.stanford.nlp.optimization">HasInitial</a></code></dd>
<dt><strong>Overrides:</strong></dt>
<dd><code><a href="../../../../edu/stanford/nlp/optimization/AbstractCachingDiffFunction.html#initial()">initial</a></code>&nbsp;in class&nbsp;<code><a href="../../../../edu/stanford/nlp/optimization/AbstractCachingDiffFunction.html" title="class in edu.stanford.nlp.optimization">AbstractCachingDiffFunction</a></code></dd>
<dt><span class="strong">Returns:</span></dt><dd>a domain point</dd></dl>
</li>
</ul>
<a name="decrementBatch(int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>decrementBatch</h4>
<pre>public&nbsp;void&nbsp;decrementBatch(int&nbsp;batchSize)</pre>
<div class="block">decrementBatch - This decrements the curElement variable by the amount batchSize.
  by decrementing the batch and then calling calculate you can recalculate over the previous batch.</div>
</li>
</ul>
<a name="incrementBatch(int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>incrementBatch</h4>
<pre>public&nbsp;void&nbsp;incrementBatch(int&nbsp;batchSize)</pre>
<div class="block">incrementBatch will shift the curElement variable to mark the next batch.  It also resets the flags:
    hasNewElements
    recalculatePrevBatch
    returnPreviousValues</div>
</li>
</ul>
<a name="getBatch(int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getBatch</h4>
<pre>protected&nbsp;void&nbsp;getBatch(int&nbsp;batchSize)</pre>
<div class="block">getBatch is used to generate the next sequence of indices to be passed to the actual function.
  Depending on the current sample method this is done by:
    Ordered - simply generates the indices 1,2,3,4,....
    RandomWithReplacement - Samples uniformly from the set of possible indices
    RandomWithoutReplacement - Samples from the set of possible indices removing each used index, then restarting
          after each pass</div>
</li>
</ul>
<a name="valueAt(double[], int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>valueAt</h4>
<pre>public&nbsp;double&nbsp;valueAt(double[]&nbsp;x,
             int&nbsp;batchSize)</pre>
<div class="block">valueAt(x,batchSize)   derivativeAt(x,batchSize)

 invokes the calculateStochastic function to get the current value at x for the next batchSize data points.  Will
    not return a HdotV since it passes v = null;</div>
</li>
</ul>
<a name="derivativeAt(double[], int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>derivativeAt</h4>
<pre>public&nbsp;double[]&nbsp;derivativeAt(double[]&nbsp;x,
                    int&nbsp;batchSize)</pre>
</li>
</ul>
<a name="valueAt(double[], double[], int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>valueAt</h4>
<pre>public&nbsp;double&nbsp;valueAt(double[]&nbsp;x,
             double[]&nbsp;v,
             int&nbsp;batchSize)</pre>
<div class="block">This function will return the stochastic approximation at the point x.  the vector v is the vector
    to be used in the vector product H.v.

 passing v = null will simply revert to a calculation without the hessian vector product.</div>
</li>
</ul>
<a name="derivativeAt(double[], double[], int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>derivativeAt</h4>
<pre>public&nbsp;double[]&nbsp;derivativeAt(double[]&nbsp;x,
                    double[]&nbsp;v,
                    int&nbsp;batchSize)</pre>
</li>
</ul>
<a name="HdotVAt(double[], double[], int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>HdotVAt</h4>
<pre>public&nbsp;double[]&nbsp;HdotVAt(double[]&nbsp;x,
               double[]&nbsp;v,
               int&nbsp;batchSize)</pre>
<div class="block">HdotVAt  will return the hessian vector product H.v at the point x for a batchSize subset of the data

 There are several ways to perform this calculation, as of now Finite Difference, and Algorithmic Differentiation
  are the methods that have been used.  To use this function calculateStochastic must also fill the array
  Hv with the hessian vector product.

 Alternative:  use the function getHdotVFiniteDifference which will simply make two calls to the function and
    come up with an approximation to this value.</div>
</li>
</ul>
<a name="HdotVAt(double[], double[], double[], int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>HdotVAt</h4>
<pre>public&nbsp;double[]&nbsp;HdotVAt(double[]&nbsp;x,
               double[]&nbsp;v,
               double[]&nbsp;curDerivative,
               int&nbsp;batchSize)</pre>
</li>
</ul>
<a name="HdotVAt(double[], double[])">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>HdotVAt</h4>
<pre>public&nbsp;double[]&nbsp;HdotVAt(double[]&nbsp;x,
               double[]&nbsp;v)</pre>
</li>
</ul>
<a name="lastDerivative()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>lastDerivative</h4>
<pre>public&nbsp;double[]&nbsp;lastDerivative()</pre>
</li>
</ul>
<a name="lastValue()">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>lastValue</h4>
<pre>public&nbsp;double&nbsp;lastValue()</pre>
<dl>
<dt><strong>Overrides:</strong></dt>
<dd><code><a href="../../../../edu/stanford/nlp/optimization/AbstractCachingDiffFunction.html#lastValue()">lastValue</a></code>&nbsp;in class&nbsp;<code><a href="../../../../edu/stanford/nlp/optimization/AbstractCachingDiffFunction.html" title="class in edu.stanford.nlp.optimization">AbstractCachingDiffFunction</a></code></dd>
</dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar_bottom">
<!--   -->
</a><a href="#skip-navbar_bottom" title="Skip navigation links"></a><a name="navbar_bottom_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../edu/stanford/nlp/optimization/AbstractCachingDiffFunction.html" title="class in edu.stanford.nlp.optimization"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../../edu/stanford/nlp/optimization/AbstractStochasticCachingDiffFunction.SamplingMethod.html" title="enum in edu.stanford.nlp.optimization"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?edu/stanford/nlp/optimization/AbstractStochasticCachingDiffFunction.html" target="_top">Frames</a></li>
<li><a href="AbstractStochasticCachingDiffFunction.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested_class_summary">Nested</a>&nbsp;|&nbsp;</li>
<li><a href="#field_summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field_detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
<p class="legalCopy"><small><FONT SIZE=2><A HREF="http://nlp.stanford.edu">Stanford NLP Group</A></FONT></small></p>
</body>
</html>
